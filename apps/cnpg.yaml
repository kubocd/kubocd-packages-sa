

apiVersion: v1alpha1
metadata:
  type: Application
  name: cnpg
  version: 0.1.0
spec:
  protected: true
  description: |
    CloudNativePG is the Kubernetes operator that covers the full lifecycle of a highly available PostgresSQL 
    database cluster with a primary/standby architecture, using native streaming replication.
  modules:
    - name: main
      source:
        helmRepository:
          url: https://cloudnative-pg.github.io/charts
          chart: cloudnative-pg
          version: 0.23.2
      values: |
        image:
          {{ $redirection := imageRedirect "ghcr.io/cloudnative-pg/cloudnative-pg" . }}
          repository: {{ $redirection.repository }}
  roles:
    - pgOperator
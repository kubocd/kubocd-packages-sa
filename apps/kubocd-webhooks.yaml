

apiVersion: v1alpha1
metadata:
  type: Application
  name: kubocd-webhooks
  version: 0.1.0
spec:
  protected: true
  description: |
    Second stage of kubocd deployment.
  parametersSchema:
    properties:
      replicaCount: { type: integer, default: 2 }
  modules:
    - name: main
      source:
        oci:
          #repository:  ghcr.io/sergealexandre/kubocd/charts/kubocd
          repository: quay.io/kubocd/charts/kubocd
          tag: v0.1.1
      values: |
        image:
          {{ $redirection := imageRedirect "quay.io/kubocd/kubocd" . }}
          repository: {{ $redirection.repository }}
          pullPolicy: Always
        controller:
          enabled: false
        webhook:
          enabled: true
          replicaCount: {{ .Parameters.replicaCount }}
          logger:
            mode: dev
            level: debug
          metrics:
            enabled: false
            secured: false
  dependencies:
    - certManager

